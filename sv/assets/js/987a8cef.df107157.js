"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2546],{8453(n,e,o){o.d(e,{R:()=>a,x:()=>t});var l=o(6540);const c={},s=l.createContext(c);function a(n){const e=l.useContext(s);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:a(n.components),l.createElement(s.Provider,{value:e},n.children)}},9078(n,e,o){o.r(e),o.d(e,{assets:()=>r,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>i});const l=JSON.parse('{"id":"extending/color-spaces","title":"Adding New Color Spaces","description":"This guide shows you how to extend Negarity Color by adding custom color spaces.","source":"@site/docs/extending/color-spaces.md","sourceDirName":"extending","slug":"/extending/color-spaces","permalink":"/negarity-color/sv/docs/extending/color-spaces","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Adding New Color Spaces","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Extractors Reference","permalink":"/negarity-color/sv/docs/references/extractors"},"next":{"title":"Adding Color Names","permalink":"/negarity-color/sv/docs/extending/color-names"}}');var c=o(4848),s=o(8453);const a={title:"Adding New Color Spaces",sidebar_position:1},t="Adding New Color Spaces",r={},i=[{value:"Overview",id:"overview",level:2},{value:"Step 1: Create the Color Space Class",id:"step-1-create-the-color-space-class",level:2},{value:"Step 2: Add Conversion Methods",id:"step-2-add-conversion-methods",level:2},{value:"For Color Class",id:"for-color-class",level:3},{value:"For MutableColor Class",id:"for-mutablecolor-class",level:3},{value:"Step 3: Add Factory Methods (Optional)",id:"step-3-add-factory-methods-optional",level:2},{value:"Step 4: Handle Conversions from Your Space",id:"step-4-handle-conversions-from-your-space",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"Important Notes",id:"important-notes",level:2},{value:"Testing Your Color Space",id:"testing-your-color-space",level:2},{value:"See Also",id:"see-also",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"adding-new-color-spaces",children:"Adding New Color Spaces"})}),"\n",(0,c.jsx)(e.p,{children:"This guide shows you how to extend Negarity Color by adding custom color spaces."}),"\n",(0,c.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,c.jsx)(e.p,{children:"To add a new color space, you need to:"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["Create a color space class implementing ",(0,c.jsx)(e.code,{children:"ColorSpaceInterface"})]}),"\n",(0,c.jsxs)(e.li,{children:["Add conversion methods to the ",(0,c.jsx)(e.code,{children:"Color"})," class"]}),"\n",(0,c.jsx)(e.li,{children:"Optionally add factory methods for convenience"}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"step-1-create-the-color-space-class",children:"Step 1: Create the Color Space Class"}),"\n",(0,c.jsxs)(e.p,{children:["Create a new class extending ",(0,c.jsx)(e.code,{children:"AbstractColorSpace"}),":"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-php",children:"<?php\n\nnamespace MyApp\\ColorSpace;\n\nuse Negarity\\Color\\ColorSpace\\AbstractColorSpace;\nuse Negarity\\Color\\Exception\\InvalidColorValueException;\nuse Negarity\\Color\\ColorSpace\\ColorSpaceEnum;\n\nfinal class MyCustomColorSpace extends AbstractColorSpace\n{\n    public static function getName(): string\n    {\n        return 'mycustom'; // Lowercase, no spaces\n    }\n\n    public static function getChannels(): array\n    {\n        return ['channel1', 'channel2', 'channel3'];\n    }\n\n    public static function hasChannel(string $name): bool\n    {\n        return in_array($name, ['channel1', 'channel2', 'channel3'], true);\n    }\n\n    public static function getChannelDefaultValue(string $name): float|int\n    {\n        return match ($name) {\n            'channel1', 'channel2', 'channel3' => 0,\n            default => throw new InvalidColorValueException(\n                \"Channel '{$name}' does not exist in mycustom color space.\"\n            ),\n        };\n    }\n\n    public static function validateValue(string $channel, int|float $value): void\n    {\n        match ($channel) {\n            'channel1', 'channel2', 'channel3' => static::assertRange(\n                (int)$value, \n                0, \n                100, \n                $channel\n            ),\n            default => throw new InvalidColorValueException(\n                \"Channel '{$channel}' does not exist in mycustom color space.\"\n            ),\n        };\n    }\n}\n"})}),"\n",(0,c.jsx)(e.h2,{id:"step-2-add-conversion-methods",children:"Step 2: Add Conversion Methods"}),"\n",(0,c.jsxs)(e.p,{children:["You need to add conversion methods to both ",(0,c.jsx)(e.code,{children:"Color"})," and ",(0,c.jsx)(e.code,{children:"MutableColor"})," classes. Since these are final classes, you'll need to extend them or modify the library."]}),"\n",(0,c.jsx)(e.h3,{id:"for-color-class",children:"For Color Class"}),"\n",(0,c.jsxs)(e.p,{children:["Add conversion methods in the ",(0,c.jsx)(e.code,{children:"Color"})," class:"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-php",children:"public function toMyCustom(): static\n{\n    // Convert from current color space to your custom space\n    $rgb = $this->toRGB();\n    \n    // Your conversion logic here\n    $channel1 = /* conversion calculation */;\n    $channel2 = /* conversion calculation */;\n    $channel3 = /* conversion calculation */;\n    \n    return new self(MyCustomColorSpace::class, [\n        'channel1' => $channel1,\n        'channel2' => $channel2,\n        'channel3' => $channel3,\n    ]);\n}\n"})}),"\n",(0,c.jsx)(e.h3,{id:"for-mutablecolor-class",children:"For MutableColor Class"}),"\n",(0,c.jsxs)(e.p,{children:["Add similar methods to ",(0,c.jsx)(e.code,{children:"MutableColor"}),":"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-php",children:"public function toMyCustom(): static\n{\n    $rgb = $this->toRGB();\n    \n    // Conversion logic\n    $channel1 = /* calculation */;\n    $channel2 = /* calculation */;\n    $channel3 = /* calculation */;\n    \n    $this->colorSpace = MyCustomColorSpace::class;\n    $this->values = [\n        'channel1' => $channel1,\n        'channel2' => $channel2,\n        'channel3' => $channel3,\n    ];\n    \n    return $this;\n}\n"})}),"\n",(0,c.jsx)(e.h2,{id:"step-3-add-factory-methods-optional",children:"Step 3: Add Factory Methods (Optional)"}),"\n",(0,c.jsxs)(e.p,{children:["Add static factory methods to ",(0,c.jsx)(e.code,{children:"AbstractColor"}),":"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-php",children:"public static function mycustom(int $c1, int $c2, int $c3): static\n{\n    return new static(MyCustomColorSpace::class, [\n        'channel1' => $c1,\n        'channel2' => $c2,\n        'channel3' => $c3,\n    ]);\n}\n"})}),"\n",(0,c.jsx)(e.h2,{id:"step-4-handle-conversions-from-your-space",children:"Step 4: Handle Conversions from Your Space"}),"\n",(0,c.jsxs)(e.p,{children:["Add conversion FROM your color space to RGB in the ",(0,c.jsx)(e.code,{children:"toRGB()"})," method:"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-php",children:"// In Color::toRGB() switch statement\ncase MyCustomColorSpace::class:\n    // Convert from your space to RGB\n    $c1 = $this->getChannel('channel1');\n    $c2 = $this->getChannel('channel2');\n    $c3 = $this->getChannel('channel3');\n    \n    // Your conversion logic\n    $r = /* calculation */;\n    $g = /* calculation */;\n    $b = /* calculation */;\n    \n    return self::rgb((int)$r, (int)$g, (int)$b);\n"})}),"\n",(0,c.jsx)(e.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,c.jsx)(e.p,{children:'Here\'s a complete example for a hypothetical "XYZ2" color space:'}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-php",children:"<?php\n\nnamespace MyApp\\ColorSpace;\n\nuse Negarity\\Color\\ColorSpace\\AbstractColorSpace;\nuse Negarity\\Color\\Exception\\InvalidColorValueException;\n\nfinal class XYZ2 extends AbstractColorSpace\n{\n    public static function getName(): string\n    {\n        return 'xyz2';\n    }\n\n    public static function getChannels(): array\n    {\n        return ['x', 'y', 'z'];\n    }\n\n    public static function hasChannel(string $name): bool\n    {\n        return in_array($name, ['x', 'y', 'z'], true);\n    }\n\n    public static function getChannelDefaultValue(string $name): float|int\n    {\n        return match ($name) {\n            'x', 'y', 'z' => 0,\n            default => throw new InvalidColorValueException(\n                \"Channel '{$name}' does not exist in xyz2 color space.\"\n            ),\n        };\n    }\n\n    public static function validateValue(string $channel, int|float $value): void\n    {\n        match ($channel) {\n            'x', 'y', 'z' => static::assertRange((int)$value, 0, 100, $channel),\n            default => throw new InvalidColorValueException(\n                \"Channel '{$channel}' does not exist in xyz2 color space.\"\n            ),\n        };\n    }\n}\n"})}),"\n",(0,c.jsx)(e.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Color space names"})," must be lowercase and unique"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Channel validation"})," is important for data integrity"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Conversion accuracy"})," depends on your conversion algorithms"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Default values"}),' should represent "no color" or "black" for your space']}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Range validation"})," prevents invalid color values"]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"testing-your-color-space",children:"Testing Your Color Space"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-php",children:"use MyApp\\ColorSpace\\XYZ2;\nuse Negarity\\Color\\Color;\n\n// Create color in your space\n$color = new Color(XYZ2::class, ['x' => 50, 'y' => 60, 'z' => 70]);\n\n// Convert to RGB\n$rgb = $color->toRGB();\n\n// Convert back\n$xyz2 = $rgb->toXYZ2();\n"})}),"\n",(0,c.jsx)(e.h2,{id:"see-also",children:"See Also"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.a,{href:"/docs/references/color-spaces",children:"Color Spaces Reference"})," - See existing color spaces"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.a,{href:"/docs/basics/converting-colors",children:"Converting Colors"})," - Understand conversions"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(d,{...n})}):d(n)}}}]);